define(["jquery","lodash","gmaps","mapsetup","smarker"],function(n,e,t,a,o){"use strict";var i,r,s=n("#map-canvas").data("event");return e.templateSettings.variable="data",r={racerInfoBox:e.template(['<div class="info-box"><span class="info-points"><%= data.name %></span>','<span class="info-points"><a href="<%= data.bio %>"><%= data.nickname %></a></span></div>'].join("")),eventInfoBox:e.template(['<div class="info-box"><span class="info-points"><%= data.name %></span>','<span class="info-points"><%= data.description %></span></div>'].join(""))},i={getObjects:function(e){return n.getJSON(e,{event:s})},fixDates:function(n){n.timestamp=new Date(n.timestamp)},logger:function(n,e){var t=e||"error";console[t](n)},addLatLon:function(n){n.latLng=new t.LatLng(n.latitude,n.longitude)},createRacerPoint:function(n){var e=new o.StyledIcon(o.StyledIconTypes.BUBBLE,{color:n.color,text:n.nickname});n.marker=new o.StyledMarker({styleIcon:e,position:n.latLng,map:a,title:n.nickname}),n.infowindow=new t.InfoWindow({content:r.racerInfoBox(n)}),t.event.addListener(n.marker,"click",function(){n.infowindow.open(a,n.marker)})},createEventPoint:function(n){i.addLatLon(n);var e=new o.StyledIcon(o.StyledIconTypes.BUBBLE,{color:"#FCC200",text:n.name});n.marker=new o.StyledMarker({styleIcon:e,position:n.latLng,map:a,title:n.name}),n.infowindow=new t.InfoWindow({content:r.eventInfoBox(n)}),t.event.addListener(n.marker,"click",function(){n.infowindow.open(a,n.marker)})},drawTrack:function(n){var o=new t.Polyline({path:e.map(n,function(n){return n.latLng}),geodesic:!0,strokeColor:n[0].color,strokeOpacity:1,strokeWeight:2});o.setMap(a),n.track=o}}});
//# sourceMappingURL=utils.js
//# sourceMappingURL=utils.js.map